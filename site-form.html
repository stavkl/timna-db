<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Archaeological Site - Timna Database</title>
    <link rel="stylesheet" href="site-form.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>Create New Archaeological Site</h1>
            <p class="subtitle">Timna Database Entry Form</p>
            <div id="connection-status" class="status-badge disconnected">Not Connected</div>
        </header>

        <!-- Login Panel -->
        <div id="login-panel" class="panel">
            <h2>Login Required</h2>
            <p>Please log in with your bot credentials to create new sites.</p>
            <form id="login-form">
                <div class="field">
                    <label for="bot-username">Bot Username</label>
                    <input type="text" id="bot-username" placeholder="YourName@BotName" required>
                    <small>Get bot credentials from <a href="https://timna-database.wikibase.cloud/wiki/Special:BotPasswords" target="_blank">Special:BotPasswords</a></small>
                </div>
                <div class="field">
                    <label for="bot-password">Bot Password</label>
                    <input type="password" id="bot-password" required>
                </div>
                <button type="submit" class="btn btn-primary">Login</button>
            </form>
        </div>

        <!-- Main Form (hidden until logged in) -->
        <div id="main-form" style="display: none;">
            <form id="site-form">
                <!-- Basic Information -->
                <section class="form-section">
                    <h2>1. Basic Information</h2>

                    <div class="field">
                        <label for="site-name">Site Name *</label>
                        <input type="text" id="site-name" placeholder="e.g., Site 003" required>
                        <small>The primary name for this archaeological site</small>
                    </div>

                    <div class="field">
                        <label for="site-description">Description *</label>
                        <textarea id="site-description" rows="3" placeholder="Brief description of the site..." required></textarea>
                        <small>E.g., "Major smelting camp with burials"</small>
                    </div>

                    <div class="field">
                        <label for="detailed-description">Detailed Description</label>
                        <textarea id="detailed-description" rows="5" placeholder="Extended description of the site, features, findings..."></textarea>
                    </div>

                    <div class="field">
                        <label for="site-identifier">Site Identifier *</label>
                        <input type="number" id="site-identifier" placeholder="e.g., 3" required>
                        <small>Numerical identifier for the site</small>
                    </div>
                </section>

                <!-- IAA Names -->
                <section class="form-section">
                    <h2>2. IAA Information (Optional)</h2>

                    <div class="field">
                        <label for="iaa-name">IAA Name</label>
                        <input type="text" id="iaa-name" placeholder="e.g., Naḥal Timna 1">
                    </div>

                    <div class="field-group">
                        <div class="field">
                            <label for="iaa-id">IAA ID</label>
                            <input type="number" id="iaa-id" placeholder="e.g., 49">
                        </div>
                        <div class="field">
                            <label for="iaa-map">IAA Map</label>
                            <input type="number" id="iaa-map" placeholder="e.g., 257">
                        </div>
                    </div>

                    <div class="field">
                        <label for="iaa-link">IAA Link</label>
                        <input type="url" id="iaa-link" placeholder="https://...">
                    </div>
                </section>

                <!-- Geographic Information -->
                <section class="form-section">
                    <h2>3. Geographic Information *</h2>

                    <div class="field-group">
                        <div class="field">
                            <label for="latitude">Latitude (WGS-84) *</label>
                            <input type="number" id="latitude" step="0.000001" placeholder="29.787654" required>
                        </div>
                        <div class="field">
                            <label for="longitude">Longitude (WGS-84) *</label>
                            <input type="number" id="longitude" step="0.000001" placeholder="34.987654" required>
                        </div>
                    </div>

                    <div class="field-group">
                        <div class="field">
                            <label for="x-itm">X ITM</label>
                            <input type="number" id="x-itm" step="0.01" placeholder="Israeli grid X coordinate">
                        </div>
                        <div class="field">
                            <label for="y-itm">Y ITM</label>
                            <input type="number" id="y-itm" step="0.01" placeholder="Israeli grid Y coordinate">
                        </div>
                    </div>

                    <div class="field">
                        <label for="altitude">Altitude (MASL)</label>
                        <input type="number" id="altitude" placeholder="e.g., 270">
                        <small>Meters above sea level</small>
                    </div>

                    <div class="field">
                        <label for="polygon-area">Polygon Area (m²)</label>
                        <input type="number" id="polygon-area" step="0.01" placeholder="e.g., 12390.56">
                    </div>
                </section>

                <!-- Dating & Period -->
                <section class="form-section">
                    <h2>4. Dating & Period</h2>

                    <div class="field">
                        <label for="archaeological-period">Archaeological Period *</label>
                        <select id="archaeological-period" required>
                            <option value="">-- Select Period --</option>
                        </select>
                        <small>Select the primary archaeological period</small>
                    </div>

                    <div class="field-group">
                        <div class="field">
                            <label for="date-from">Absolute Date From (BCE)</label>
                            <input type="number" id="date-from" placeholder="e.g., -1219">
                            <small>Use negative numbers for BCE</small>
                        </div>
                        <div class="field">
                            <label for="date-to">Absolute Date To (BCE)</label>
                            <input type="number" id="date-to" placeholder="e.g., -1031">
                        </div>
                    </div>

                    <div class="field">
                        <label for="dating-method">Absolute Dating Methods</label>
                        <select id="dating-method" multiple size="3">
                            <option value="">Loading...</option>
                        </select>
                        <small>Hold Ctrl/Cmd to select multiple methods</small>
                    </div>
                </section>

                <!-- Function & Features -->
                <section class="form-section">
                    <h2>5. Site Function & Features</h2>

                    <div class="field">
                        <label for="site-function">Archaeological Functions</label>
                        <select id="site-function" multiple size="4">
                            <option value="">Loading...</option>
                        </select>
                        <small>Select all that apply (Ctrl/Cmd for multiple)</small>
                    </div>

                    <div class="field">
                        <label for="artifact-types">Artifact Types Found</label>
                        <select id="artifact-types" multiple size="5">
                            <option value="">Loading...</option>
                        </select>
                        <small>Select all artifact types present at the site</small>
                    </div>
                </section>

                <!-- Research Project -->
                <section class="form-section">
                    <h2>6. Research Information</h2>

                    <div class="field">
                        <label for="research-project">Research Project *</label>
                        <select id="research-project" required>
                            <option value="">-- Select Project --</option>
                        </select>
                    </div>
                </section>

                <!-- Submit -->
                <section class="form-section">
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <span class="btn-icon">✓</span>
                            Create Archaeological Site
                        </button>
                        <button type="reset" class="btn btn-secondary">
                            <span class="btn-icon">↻</span>
                            Clear Form
                        </button>
                        <button type="button" class="btn btn-secondary" id="logout-btn">
                            <span class="btn-icon">⎋</span>
                            Logout
                        </button>
                    </div>
                </section>
            </form>

            <!-- Status Messages -->
            <div id="status-message" class="status-message" style="display: none;"></div>

            <!-- Progress Indicator -->
            <div id="progress" class="progress" style="display: none;">
                <div class="progress-bar"></div>
                <div class="progress-text">Creating site...</div>
            </div>
        </div>

        <!-- Recent Sites -->
        <div id="recent-sites" class="recent-items" style="display: none;">
            <h3>Recently Created Sites</h3>
            <ul id="recent-sites-list"></ul>
        </div>
    </div>

    <script src="site-form.js"></script>
</body>
</html>
